(()=>{"use strict";async function e(e){return new Promise((r=>setTimeout(r,e)))}function r(){let e=new URL(location.href).hostname.split("."),r="";return r=2==e.length?e[0]:e[1],r}async function t(){try{const t=location.href,o=r();console.log(o);const n={nike:{title:document.getElementById("pdp_product_title")?document.getElementById("pdp_product_title").textContent:document.querySelector('[data-qa="product-title"]')?document.querySelector('[data-qa="product-title"]').textContent:"couldnt catch title",price:"nike"==o&&(document.querySelector('[data-test="product-price-reduced"]')?.textContent||document.querySelector('[data-test="product-price"]')?.textContent||document.querySelector('[data-qa="price"]')?.textContent||document.querySelector(".is--current-price")?.textContent),sizes:(()=>{if("nike"!==o)return[];let e=[],r=[];return t.includes("/launch/")?(e=document.querySelectorAll('[data-qa="size-dropdown"]'),e.forEach((e=>{e.disabled||r.push(e.textContent)}))):(e=Array.from(document.querySelectorAll('[name="skuAndSize"]')),e.forEach((e=>{if(!e.disabled){const t=e.parentElement.querySelector("label")?.innerText;r.push(t.split(" ")[1]||t)}}))),r})(),style:{backgroundSize:"cover",backgroundPosition:"bottom",backgroundColor:"white",marginTop:"auto"},gender:document.querySelector("h2")?.innerText?.split(" ")[0]||"",RRP:document.querySelector(".product-price.is--striked-out ")?.childNodes[1]?.textContent,dontSort:!0,firstColor:document.querySelector(".description-preview__color-description")?.innerText?.split(":")[1].split("/")[0].trim()},endclothing:{title:document.querySelector("h1 span")?.innerText,price:document.querySelector('[data-test-id="PDP__Details__FinalPrice"')?.innerText||document.querySelector('[data-test-id="ProductDetails__Price"]')?.innerText,sizes:"endclothing"==o&&Array.from(document.querySelector('[data-test-id="Size__List"]').children).map((e=>e.innerText.replace("UK",""))),style:{backgroundSize:"1000px",backgroundPosition:"top",backgroundColor:"white",marginTop:"60px"},gender:document.querySelector('[property="name"]')?.innerText||"",RRP:document.querySelector('[data-test-id="ProductDetails__Price"] span')?.innerText,firstColor:document.querySelector('h1 [data-test-id="ProductDetails__Colour"]')?.innerText.split("&")[0]},sevenstore:{title:document.querySelector(".product-name")?document.querySelector(".product-name").textContent:"couldnt catch title",price:document.querySelector(".product-price.sale span")?.innerText||document.querySelector(".product-price span")?.innerText,RRP:document.querySelector(".product-price.rrp span")?.innerText,sizes:"sevenstore"==o&&Array.from(document.querySelector(".sizes-scroll-wrapper").children).map((e=>e.innerText)),style:{backgroundSize:"cover",backgroundPosition:"bottom",backgroundColor:"#E6E6E6",marginTop:"-120px"},firstColor:document.querySelector("h1.product-title + .product-colour")?.innerText.split("/")[0]},offspring:{title:document.querySelector(".product__title")?.innerText.replace("\n"," "),price:document.querySelector(".product__saleprice")?.innerText||document.querySelector(".price__price")?.innerText,RRP:document.querySelector(".product__saleprice--was")?.innerText,sizes:(()=>{if(!o.includes("offspring"))return[];let e=document.querySelector('[data-locale="UK"]').children;return e=Array.from(e).filter((e=>!e.className.includes("disabled"))),e[0]?(e=e.map((e=>e.querySelector(".product__sizes-size-1").textContent)),e):alert("no Size is avaiable")})(),style:{backgroundSize:"cover",backgroundPosition:"bottom center",backgroundColor:"#E6E6E6",marginTop:"auto"},firstColor:document.querySelector(".product__details .product__variant")?.innerText.split(" ").slice(0,2).join(" ")},adidas:{title:document.querySelector('[data-auto-id="product-title"]')?.innerText||document.querySelector("h1")?.innerText,price:document.querySelector('[class^="sidebar-wrapper"] .gl-price-item--sale')?.innerText||document.querySelector('[class^="sidebar-wrapper"] .gl-price-item')?.innerText,RRP:document.querySelector('[class^="sidebar-wrapper"] .gl-price-item--crossed')?.innerText,sizes:"adidas"!=o?[]:Array.from(document.querySelectorAll("button.gl-label")).filter((e=>!e.className.includes("unavailable"))).map((e=>e.innerText)),style:{backgroundSize:"cover",backgroundPosition:"bottom",backgroundColor:"#E6E6E6",marginTop:"auto"},firstColor:document.querySelector('[data-testid="color-label"]')?.innerText.split("/")[0]},footlocker:{title:document.title.split("|")[0]?.trim()||document.querySelector("h1").children[0]?.innerText||document.querySelector(".ProductName-primary")?.innerText||"??",price:document.querySelector(".ProductPrice span")?.innerText?.startsWith("Â£")?document.querySelector(".ProductPrice span")?.innerText:document.querySelector(".ProductPrice-final")?.innerText||document.querySelector(".ProductPrice span span:nth-child(2)")?.innerText,RRP:document.querySelector("#ProductDetails .ProductPrice-original")?.innerText,sizes:o.includes("footlocker")?Array.from(document.querySelectorAll('button[class *="Size"]')).filter((e=>!e.className.includes("disabled"))).map((e=>e.innerText)):[],style:{backgroundSize:"contain",backgroundPosition:"top",backgroundColor:"#E6E6E6",marginTop:"auto"},gender:document.querySelector(".ProductName-alt")?.innerText,firstColor:document.querySelector('#ProductDetails p[aria-label^="Color"]')?.innerText.split(" ")[0]},newbalance:{title:document.querySelector("h1")?.innerText,price:document.querySelector(".price-value .sales ")?.innerText||document.querySelector(".price-value")?.innerText,sizes:"newbalance"==o&&Array.from(document.querySelectorAll(".size-value.selectable")).map((e=>e.innerText)),style:{backgroundSize:"contain",backgroundPosition:"top",backgroundColor:"#E6E6E6",marginTop:"auto"},gender:document.querySelector(".product-category")?.innerText,RRP:document.querySelector(".price-value .strike-through .value")?.childNodes[2]?.nodeValue?.replace(/\n/g,"").trim(),firstColor:document.querySelector(".color-display-name > span")?.innerText.split("with")[0]},bstn:{title:document.querySelector(".page-title")?.innerText.replace("\n"," "),price:document.querySelector(".price-main .price")?.innerText,sizes:"bstn"==o&&Array.from(Array.from(document.querySelectorAll('div[role="listbox"]')).slice(-1)[0].children).filter((e=>!e.className.includes("disabled"))).map((e=>{let r=e.innerText.replace(",","."),t="";return t=r.includes("-")?r.split("-")[0]:r,t})),style:{backgroundSize:"contain",backgroundPosition:"top",backgroundColor:"#E6E6E6",marginTop:"auto"},gender:document.querySelector('[data-th="Gender"]')?.innerText||"",RRP:document.querySelector('.product-info-price [data-price-type="oldPrice"]')?.innerText,firstColor:document.querySelector('[data-th="Color"]')?.innerText.split("/")[0],styleCode:document.querySelector('meta[itemprop="gtin"]')?.content},size:{title:document.querySelector("h1")?.innerText,price:document.querySelector(".itemPrices .pri span span")?.innerText||document.querySelector(".itemPrices .pri")?.innerText,sizes:"size"==o&&Array.from(document.querySelector("#productSizeStock").children).filter((e=>!e.className.includes("noStock"))).map((e=>e.innerText)),style:{backgroundSize:"contain",backgroundPosition:"center",backgroundColor:"#EEEEEE",marginTop:"auto"},gender:document.querySelectorAll(".no a")[1]?.innerText?.trim(),RRP:document.querySelector(".was span")?.innerText,firstColor:document.querySelector(".acitem li span")?.previousSibling?.nodeValue.trim()},footpatrol:{title:document.querySelector("h1")?.innerText,price:document.querySelector(".itemPrices .pri span span")?.innerText||document.querySelector(".itemPrices .pri")?.innerText,gender:"footpatrol"==o&&Array.from(document.querySelectorAll(".no"))?.slice(-1)[0]?.innerText.split(" ")[0],style:{backgroundSize:"contain",backgroundPosition:"center",backgroundColor:"#EEEEEE",marginTop:"-120px"},sizes:"footpatrol"==o&&Array.from(document.querySelector("#productSizeStock").children).filter((e=>!e.className.includes("noStock"))).map((e=>e.innerText.split(" ")[0])),RRP:document.querySelector(".was span")?.innerText,firstColor:document.querySelector(".acitem li span")?.previousSibling?.nodeValue.trim()},jdsports:{title:document.querySelector("h1")?.innerText,price:document.querySelector(".itemPrices .pri span span")?.innerText||document.querySelector(".itemPrices .pri")?.innerText,gender:"jdsports"==o&&Array.from(document.querySelectorAll(".no"))?.slice(-2)[0]?.innerText.split(" ")[0],style:{backgroundSize:"contain",backgroundPosition:"center",backgroundColor:"#EEEEEE",marginTop:""},sizes:"jdsports"==o&&Array.from(document.querySelector("#productSizeStock").children).filter((e=>!e.className.includes("noStock"))).map((e=>e.innerText.split("(")[0])),RRP:document.querySelector(".was span")?.innerText,firstColor:document.title.split(" ")[0]},thehipstore:{title:document.querySelector(".pdp-title")?.innerText.replace("\n"," "),price:document.querySelector(".itemPrices .pri span span")?.innerText||document.querySelector(".itemPrices .pri")?.innerText,gender:"thehipstore"==o&&Array.from(document.querySelectorAll(".no"))?.slice(1)[0]?.innerText.split(" ")[0],style:{backgroundSize:"contain",backgroundPosition:"center",backgroundColor:"#EEEEEE",marginTop:""},sizes:"thehipstore"==o&&Array.from(document.querySelector("#productSizeStock").children).filter((e=>!e.className.includes("noStock"))).map((e=>e.innerText.split("(")[0].replace("UK","").trim())),RRP:document.querySelector(".was span")?.innerText,firstColor:document.querySelector(".acitem li span")?.previousSibling?.nodeValue.trim()},asos:{title:document.querySelector("h1")?.innerText,price:document.querySelector('[data-testid="current-price"]')?.innerText.split(" ").slice(-1)[0],gender:document.querySelectorAll('[aria-label="breadcrumbs"] a')[1]?.innerText?.trim(),style:{backgroundSize:"cover",backgroundPosition:"center",backgroundColor:"#EEEEEE",marginTop:""},sizes:"asos"==o&&Array.from(document.querySelector("#variantSelector").children).splice(1).filter((e=>!e.disabled)).map((e=>e.innerText.replace("UK","").trim())),RRP:document.querySelector('[data-testid="previous-price"]')?.innerText?.split(" ")[1],firstColor:""},selfridges:{title:document.querySelector("h1 p")?.innerText,price:document.querySelector('[class^="Price__PriceContainer"] span')?.innerText||document.querySelector("p.o-price")?.innerText,RRP:document.querySelector('[class^="Price__PreMarkdownPrice"]')?.innerText,gender:document.querySelector('a[class^="src__Link"]')?.innerText,sizes:await(async()=>{if("selfridges"!==o)return[];const r=document.querySelector('button[class^="SizeDropdown__Dropdown"]'),t=document.querySelector(".c-select__button"),n=document.querySelector('input[name="size-grid-radio"]');if(r){r.click(),await async function(e,r=5e3,t=100){return new Promise(((o,n)=>{const c=setTimeout((()=>{console.log("Timed out"),n(!1)}),r),i=setInterval((()=>{const r=document.querySelector(e);r&&(clearTimeout(c),clearInterval(i),console.log("Found",r),o(r))}),t)}))}('input[name="size-list-radio"]');let e=Array.from(document.querySelectorAll('input[name="size-list-radio"]'));return e=e.filter((e=>{const r=e.parentElement.querySelector('[class^="StockMessage__StockWarning"]')?.innerText;return!r||"Out of stock"!=r})),e=e.map((e=>{let r=e.value;return r.includes("/")&&(r=r.split("/")[1].trim().split(" ")[0]),r})),document.querySelector('[class^="Modal__CloseButton"]').click(),e}if(t)return Array.from(document.querySelectorAll('.c-select__dropdown-item:not([class*="--oos"]):not([class*="--selected"]')).map((e=>e.querySelector("span").textContent));if(n){const r=Array.from(document.querySelectorAll('input[name="size-grid-radio"]'));let t=[];for await(let o of r)o.click(),await e(50),document.querySelector("#primary-add-to-bag-btn").disabled||t.push(o.value);return t}})(),style:{backgroundSize:"cover",backgroundPosition:"center",backgroundColor:"#EEEEEE",marginTop:"-150px"},firstColor:document.querySelector('[class^="ColourPalette__SelectedColourValue"]')?.innerText.split("/")[0]},office:{title:document.querySelector("h3")?.innerText,price:document.querySelector(".js-price")?.innerText,RRP:document.querySelector(".product__saleprice--was")?.innerText,style:{backgroundSize:"cover",backgroundPosition:"center",backgroundColor:"#EEEEEE",marginTop:"24px"},gender:"",sizes:"office"==o&&Array.from(document.querySelector(".product .product__sizes-select").querySelectorAll("li")).filter((e=>!e.className.includes("disabled"))).map((e=>e.querySelector("span")?.innerText.split(" ")[0])),firstColor:document.querySelector(".product__variant")?.innerText},sneakersnstuff:{title:document.querySelector("h1 span")?.innerText,price:document.querySelector(".product-view__header .price__current")?.innerText,RRP:document.querySelector(".product-view__header .price__original")?.innerText,gender:document.querySelectorAll(".product-view__details dd")[2]?.innerText,style:{backgroundSize:"cover",backgroundPosition:"center",backgroundColor:"#EEEEEE",marginTop:"24px"},sizes:"sneakersnstuff"==o&&Array.from(document.querySelectorAll("#product-size option")).map((e=>e.innerText.split(" ")[1])).filter((e=>e)),firstColor:document.querySelectorAll(".product-view__details dd")[1]?.innerText.split("-")[0]}}[o];return n.domain=o,n}catch(e){console.log(e)}}console.log("EasyShot");const o=new URL(location.href).host;"www.asos.com"==o&&setTimeout((()=>{const e=Array.from(document.querySelectorAll(".amp-overlay"));e[1]&&(e[1].style.display="none")}),1e3);var n=null,c=null,i=null;document.addEventListener("contextmenu",(e=>{n=e.target,c=n.src,"www.selfridges.com"===o&&(c=c.includes("https")?c:n.parentElement.children[0].srcset.split(" ").filter((e=>e.includes("https"))).at(-1))})),chrome.runtime.onMessage.addListener(((e,l,u)=>{switch(e.type){case"sendActive":if(!n)return alert("couldnt find target , refresh the page");t().then((e=>{if(!e)return alert("Error in scraping or Site not supported");u({target:c,info:e,host:o})}));case"getShoeData":t().then((e=>{u(e)}));break;case"selectImages":const{imageNumbersArr:l}=e,a=function(){let e=r();return{nike:Array.from(document.querySelectorAll('[data-testid="ThumbnailListContainer"] img')),offspring:Array.from(document.querySelectorAll(".product-grid__picture img")),sevenstore:Array.from(document.querySelectorAll(".thumbnail-container img")),footlocker:Array.from(document.querySelectorAll(".ProductGallery--thumbRow img")),endclothing:Array.from(document.querySelectorAll('[id^="ribbon"]')),jdsports:Array.from(document.querySelectorAll("#productGallery .owl-thumbs img")),adidas:Array.from(document.querySelectorAll("#pdp-gallery-desktop-grid-container img")),newbalance:Array.from(document.querySelectorAll('.carousel-inner:not([class*="d-none"]) img')),bstn:Array.from(document.querySelectorAll(".product-page__gallery .zoomable img")),size:Array.from(document.querySelectorAll(".owl-thumbs img")),footpatrol:Array.from(document.querySelectorAll("#gallery .owl-thumbs img")).map((e=>(e.src=e.src.replace("w=160","w=750").replace("h=123","h=580"),e))),thehipstore:Array.from(document.querySelectorAll("#banner-section-images img")),asos:Array.from(document.querySelectorAll(".thumbnails img")).map((e=>(e.src=e.srcset.split(",").at(-1),e))),selfridges:Array.from(document.querySelectorAll('[class^="ImageGallery__ImageGalleryWrapper"] picture source:first-child')).map((e=>(e.src=e.srcset,e))),office:Array.from(document.querySelectorAll(".product-grid__wrapper img")),sneakersnstuff:Array.from(document.querySelectorAll(".image-gallery__track img")).map((e=>e.srcset.split(" ").at(-2)))}[e]}();if(!a||0==a.length)return;null==i&&(i=a[0].style.border);const s=function({imagesElements:e,arrayToHighlight:r,defaultBorder:t}){e.forEach((e=>e.style.border=t));const o=e.filter(((e,t)=>r.includes(+t+1)));return o.forEach((e=>e.style.border="3px solid red")),o}({imagesElements:a,arrayToHighlight:l,defaultBorder:i}),d=s.map((e=>e.src)).filter((e=>e.startsWith("http")));u(d)}return!0}))})();